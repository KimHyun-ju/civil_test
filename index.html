<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>RC ë³´ ë‹¨ë©´ ì„¤ê³„ (Mobile)</title>
    <style>
        /* ê¸°ë³¸ ì„¤ì • */
        * { box-sizing: border-box; } /* íŒ¨ë”©ì´ ë„ˆë¹„ì— í¬í•¨ë˜ë„ë¡ ì„¤ì • */
        body { 
            font-family: 'Pretendard', -apple-system, BlinkMacSystemFont, system-ui, Roboto, 'Helvetica Neue', 'Segoe UI', 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            background: #f0f2f5; 
            display: flex; 
            justify-content: center; 
            align-items: flex-start; /* ëª¨ë°”ì¼ ìŠ¤í¬ë¡¤ ê³ ë ¤í•˜ì—¬ center -> flex-start */
            min-height: 100vh; 
            margin: 0; 
            padding: 20px; /* ëª¨ë°”ì¼ ì¢Œìš° ì—¬ë°± í™•ë³´ */
        }

        /* ì»¨í…Œì´ë„ˆ: ë°˜ì‘í˜• í•µì‹¬ */
        .container { 
            background: white; 
            padding: 2rem; 
            border-radius: 16px; 
            box-shadow: 0 4px 20px rgba(0,0,0,0.08); 
            
            width: 100%;       /* ê¸°ë³¸ì ìœ¼ë¡œ ê½‰ ì°¨ê²Œ */
            max-width: 480px;  /* í•˜ì§€ë§Œ 480pxì€ ë„˜ì§€ ì•Šê²Œ (ë°ìŠ¤í¬íƒ‘ ë°©ì–´) */
            margin-top: 20px;  /* ìƒë‹¨ ì—¬ë°± */
            margin-bottom: 40px; /* í•˜ë‹¨ ì—¬ë°± */
        }

        h2 { 
            text-align: center; 
            color: #2c3e50; 
            margin-bottom: 25px; 
            border-bottom: 3px solid #007BFF; 
            padding-bottom: 15px; 
            font-size: 1.5rem;
        }
        
        /* ì…ë ¥ í•„ë“œ ë ˆì´ì•„ì›ƒ */
        .input-section { 
            display: grid; 
            grid-template-columns: 1fr 1fr; /* 2ì—´ ë°°ì¹˜ */
            gap: 15px; 
            margin-bottom: 20px; 
        }
        .input-group { display: flex; flex-direction: column; }
        .input-group.full-width { grid-column: span 2; }
        
        label { font-weight: 600; color: #555; font-size: 0.9rem; margin-bottom: 6px; }
        input { 
            padding: 12px; 
            border: 1px solid #ddd; 
            border-radius: 8px; 
            text-align: right; 
            font-size: 1rem; 
            transition: 0.3s; 
            width: 100%;
            -webkit-appearance: none; /* ëª¨ë°”ì¼ ì‚¬íŒŒë¦¬ ê¸°ë³¸ ìŠ¤íƒ€ì¼ ì œê±° */
        }
        input:focus { border-color: #007BFF; outline: none; box-shadow: 0 0 0 3px rgba(0,123,255,0.1); }
        
        /* ë²„íŠ¼ ê·¸ë£¹ */
        .btn-group { display: flex; gap: 10px; margin-top: 10px; }
        button { 
            flex: 1; 
            padding: 14px; 
            border: none; 
            border-radius: 8px; 
            font-size: 1.05rem; 
            font-weight: bold; 
            cursor: pointer; 
            transition: background 0.2s; 
        }
        
        .btn-calc { background: #007BFF; color: white; }
        .btn-calc:active { background: #0056b3; } /* ëª¨ë°”ì¼ í„°ì¹˜ê° */
        .btn-reset { background: #e9ecef; color: #495057; }
        .btn-reset:active { background: #dee2e6; }

        /* ê²°ê³¼ì°½ */
        .result-box { margin-top: 25px; padding: 15px; background: #f8f9fa; border-radius: 12px; border: 1px solid #e9ecef; display: none; }
        .section-title { font-weight: 800; color: #333; margin: 15px 0 10px 0; border-left: 4px solid #007BFF; padding-left: 10px; font-size: 1rem; }
        .result-row { display: flex; justify-content: space-between; align-items: center; margin-bottom: 10px; font-size: 0.9rem; }
        .status-ok { color: #28a745; font-weight: bold; }
        .status-ng { color: #dc3545; font-weight: bold; }
        .final-val { font-size: 1.1rem; color: #007BFF; font-weight: bold; text-align: right; }
        .note { font-size: 0.85rem; color: #666; margin-top: 8px; text-align: right; background: #eef4fc; padding: 8px; border-radius: 6px;}
        
        .error-msg { color: #dc3545; background-color: #f8d7da; padding: 12px; border-radius: 8px; text-align: center; font-weight: bold; margin-bottom: 10px; font-size: 0.9rem; }

        /* ğŸ“± ëª¨ë°”ì¼ ì „ìš© ë¯¸ë””ì–´ ì¿¼ë¦¬ (í™”ë©´ í­ì´ 380px ì´í•˜ì¼ ë•Œ) */
        @media (max-width: 380px) {
            .container { padding: 1.5rem 1rem; } /* íŒ¨ë”©ì„ ì¡°ê¸ˆ ì¤„ì„ */
            h2 { font-size: 1.3rem; }
            .input-section { gap: 10px; } /* ê°„ê²© ì¢í˜ */
            input { padding: 10px; font-size: 0.95rem; }
            .result-row { font-size: 0.85rem; }
        }
    </style>
</head>
<body>

<div class="container">
    <h2>RC ë³´ ë‹¨ë©´ ì„¤ê³„ê¸°</h2>
    
    <div class="input-section">
        <div class="input-group">
            <label>ì½˜í¬ë¦¬íŠ¸ fck</label>
            <input type="number" id="fck" placeholder="24" inputmode="decimal">
        </div>
        <div class="input-group">
            <label>ì² ê·¼ fy</label>
            <input type="number" id="fy" placeholder="400" inputmode="decimal">
        </div>
        <div class="input-group">
            <label>ë³´ í­ b (mm)</label>
            <input type="number" id="b" placeholder="300" inputmode="decimal">
        </div>
        <div class="input-group">
            <label>ìœ íš¨ ê¹Šì´ d (mm)</label>
            <input type="number" id="d" placeholder="500" inputmode="decimal">
        </div>
        <div class="input-group full-width">
            <label style="color:#0056b3;">ê³„ìˆ˜ ëª¨ë©˜íŠ¸ Mu (kNÂ·m)</label>
            <input type="number" id="mu" placeholder="200" inputmode="decimal">
        </div>
        <div class="input-group full-width">
            <label style="color:#d63384;">ê³„ìˆ˜ ì „ë‹¨ë ¥ Vu (kN)</label>
            <input type="number" id="vu" placeholder="150" inputmode="decimal">
        </div>
    </div>

    <div class="btn-group">
        <button class="btn-reset" onclick="resetFields()">ì´ˆê¸°í™”</button>
        <button class="btn-calc" onclick="calculate()">ì„¤ê³„ ìˆ˜í–‰</button>
    </div>

    <div id="result" class="result-box"></div>
</div>

<script>
    function calculate() {
        const resBox = document.getElementById('result');
        resBox.style.display = 'block';

        const val_fck = document.getElementById('fck').value;
        const val_fy = document.getElementById('fy').value;
        const val_b = document.getElementById('b').value;
        const val_d = document.getElementById('d').value;
        const val_mu = document.getElementById('mu').value;
        const val_vu = document.getElementById('vu').value;

        // ìœ íš¨ì„± ê²€ì‚¬
        if (!val_fck || !val_fy || !val_b || !val_d || !val_mu || !val_vu) {
            resBox.innerHTML = "<div class='error-msg'>âš ï¸ ê°’ì„ ëª¨ë‘ ì…ë ¥í•´ì£¼ì„¸ìš”.</div>";
            return;
        }

        const fck = parseFloat(val_fck);
        const fy = parseFloat(val_fy);
        const b = parseFloat(val_b);
        const d = parseFloat(val_d);
        const Mu_kNm = parseFloat(val_mu);
        const Vu_kN = parseFloat(val_vu);

        if (fck <= 0 || fy <= 0 || b <= 0 || d <= 0) {
             resBox.innerHTML = "<div class='error-msg'>âš ï¸ ì¹˜ìˆ˜ëŠ” 0ë³´ë‹¤ ì»¤ì•¼ í•©ë‹ˆë‹¤.</div>";
             return;
        }
        if (Mu_kNm < 0 || Vu_kN < 0) {
             resBox.innerHTML = "<div class='error-msg'>âš ï¸ í•˜ì¤‘ì€ ì–‘ìˆ˜ì—¬ì•¼ í•©ë‹ˆë‹¤.</div>";
             return;
        }

        // === ê³„ì‚° ë¡œì§ ===
        let html = "";

        // 1. íœ¨ ì„¤ê³„
        const Mu = Mu_kNm * 1e6; 
        const phi_m = 0.85; 
        const Rn = Mu / (phi_m * b * d * d);
        const checkTerm = 1 - (2 * Rn) / (0.85 * fck);

        html += "<div class='section-title'>1. íœ¨ ì„¤ê³„ (Mu)</div>";

        if (checkTerm < 0) {
            html += "<div class='status-ng'>â›” ë‹¨ë©´ ë¶€ì¡± (íŒŒê´´ ìœ„í—˜)<br>b ë˜ëŠ” dë¥¼ í‚¤ìš°ì„¸ìš”.</div>";
        } else {
            const rho_req = (0.85 * fck / fy) * (1 - Math.sqrt(checkTerm));
            const rho_min = Math.max(1.4 / fy, 0.25 * Math.sqrt(fck) / fy);

            let beta1 = 0.85;
            if (fck > 28) {
                beta1 = 0.85 - 0.007 * (fck - 28);
                if (beta1 < 0.65) beta1 = 0.65;
            }
            const rho_max = (0.85 * beta1 * fck / fy) * (0.003 / (0.003 + 0.005));
            const rho_design = Math.max(rho_req, rho_min);
            const As_final = rho_design * b * d;

            let minCheck = (rho_req >= rho_min) ? "OK" : "ìµœì†Œì² ê·¼ë¹„ ì ìš©";
            html += `<div class='result-row'><span>â€¢ ìµœì†Œë¹„ ê²€í† </span> <span>${minCheck}</span></div>`;

            let maxCheck = (rho_design <= rho_max) ? "<span class='status-ok'>OK</span>" : "<span class='status-ng'>NG (ë‹¨ë©´ë¶€ì¡±)</span>";
            html += `<div class='result-row'><span>â€¢ ìµœëŒ€ë¹„ ê²€í† </span> <span>${maxCheck}</span></div>`;

            html += `<hr style='margin:10px 0; border-top:1px dashed #ccc;'>`;
            html += `<div class='result-row'><span>í•„ìš” ì² ê·¼ëŸ‰ As</span> <span class='final-val'>${As_final.toFixed(0)} mmÂ²</span></div>`;
            
            const numBars = Math.ceil(As_final / 387);
            html += `<div class='note'>â¡ ì¶”ì²œ: <b>${numBars}-D22</b> (ì£¼ì² ê·¼)</div>`;
        }

        // 2. ì „ë‹¨ ì„¤ê³„
        html += "<div class='section-title'>2. ì „ë‹¨ ì„¤ê³„ (Vu)</div>";
        
        const Vu = Vu_kN * 1000;
        const phi_v = 0.75;
        const Vc = (1/6) * Math.sqrt(fck) * b * d;
        const phiVc = phi_v * Vc;

        if (Vu <= phiVc / 2) {
            html += "<div class='result-row'><span>ì „ë‹¨ ìƒíƒœ</span> <span class='status-ok'>ì•ˆì „ (ì² ê·¼ X)</span></div>";
        } else {
            const Vs = (Vu / phi_v) - Vc;
            if (Vs < 0) {
                 html += "<div class='result-row'><span>ì „ë‹¨ ìƒíƒœ</span> <span>ìµœì†Œì² ê·¼ êµ¬ê°„</span></div>";
                 html += `<div class='result-row'><span>ì¶”ì²œ ê°„ê²©</span> <span class='final-val'>D10 @ 300</span></div>`;
            } else {
                const Av = 142.66;
                let s = (Av * fy * d) / Vs;
                const s_max = Math.min(d/2, 600);
                s = Math.min(s, s_max);
                s = Math.floor(s / 10) * 10;
                
                if (s < 50) {
                    html += "<div class='status-ng'>âš ï¸ ì „ë‹¨ ìœ„í—˜: ë‹¨ë©´ í‚¤ìš¸ ê²ƒ</div>";
                } else {
                    html += `<div class='result-row'><span>ê³„ì‚° ê°„ê²©</span> <span>${s} mm</span></div>`;
                    html += `<div class='result-row'><span>ì¶”ì²œ ë°°ê·¼</span> <span class='final-val'>D10 @ ${s}</span></div>`;
                }
            }
        }

        resBox.innerHTML = html;
    }

    function resetFields() {
        const inputs = document.querySelectorAll('input');
        inputs.forEach(input => input.value = '');
        const resBox = document.getElementById('result');
        resBox.style.display = 'none';
        resBox.innerHTML = '';
    }
</script>

</body>
</html>